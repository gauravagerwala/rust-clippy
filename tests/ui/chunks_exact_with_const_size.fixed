#![warn(clippy::chunks_exact_with_const_size)]
#![allow(unused)]

fn main() {
    let slice = [1, 2, 3, 4, 5, 6, 7, 8];

    // Should NOT trigger - runtime value
    let size = 4;
    let mut it = slice.chunks_exact(size);
    for chunk in it {}

    // Should trigger - direct iteration without binding (gets suggestion)
    for chunk in slice.as_chunks::<4>().0.iter() {
        //~^ chunks_exact_with_const_size
        let _ = chunk;
    }

    // Should trigger - direct iteration with const
    const CHUNK_SIZE: usize = 4;
    for chunk in slice.as_chunks::<CHUNK_SIZE>().0.iter() {
        //~^ chunks_exact_with_const_size
        let _ = chunk;
    }

    // Should trigger - chunks_exact_mut with direct iteration (gets suggestion)
    // Note: The suggestion uses .iter() but should use .iter_mut() - this is a known limitation
    let mut arr = [1, 2, 3, 4, 5, 6, 7, 8];
    for chunk in arr.as_chunks_mut::<4>().0.iter() {
        //~^ chunks_exact_with_const_size
        let _ = chunk;
    }
}
