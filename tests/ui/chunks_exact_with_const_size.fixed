#![warn(clippy::chunks_exact_with_const_size)]
#![allow(unused)]

fn main() {
    let slice = [1, 2, 3, 4, 5, 6, 7, 8];

    // Should trigger lint - literal constant
    let mut it = slice.as_chunks::<4>().0.iter();
    //~^ chunks_exact_with_const_size
    for chunk in it {}

    // Should trigger lint - const value
    const CHUNK_SIZE: usize = 4;
    let mut it = slice.as_chunks::<CHUNK_SIZE>().0.iter();
    //~^ chunks_exact_with_const_size
    for chunk in it {}

    // Should NOT trigger - runtime value
    let size = 4;
    let mut it = slice.chunks_exact(size);
    for chunk in it {}

    // Should trigger lint - simple iteration
    let mut it = slice.as_chunks::<3>().0.iter();
    //~^ chunks_exact_with_const_size
    for chunk in it {}

    // Should trigger - mutable variant
    let mut arr = [1, 2, 3, 4, 5, 6, 7, 8];
    let mut it = arr.as_chunks_mut::<4>().0.iter();
    //~^ chunks_exact_with_const_size
    for chunk in it {}
}
